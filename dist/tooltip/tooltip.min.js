!function(){function t(t){return t in S}function e(t){var e=t.getBoundingClientRect(),n=document.documentElement.scrollTop||document.body.scrollTop||0,i=document.documentElement.scrollLeft||document.body.scrollLeft||0;return{left:e.left+i,right:e.right+i,top:e.top+n,bottom:e.bottom+n,width:e.width,height:e.height}}function n(t,n){var n=void 0!==n?n:e(t);return{x:t.offsetWidth?n.width/t.offsetWidth:1,y:t.offsetHeight?n.height/t.offsetHeight:1}}function i(t,e,n){this.eventType=e,this.listenerFn=n,this.elem=t,this._attachedFn=null}function r(t){this._cachedListener=null,this._tooltips=[];var e=this,n=function(t){e._tooltips.forEach(function(e){e.xtag._skipOuterClick||!e.hasAttribute("visible")||e.hasAttribute("ignore-outer-trigger")||c(t.target,e)||_(e),e.xtag._skipOuterClick=!1})};this._cachedListener=new i(document,t,n),this._cachedListener.attachListener()}function o(){this.eventStructDict={}}function a(t,e,n){var r=function(e){n&&c(e.target,t.previousElementSibling)&&n.call(t.previousElementSibling,e)};return new i(document.documentElement,e,r)}function s(t,e,n){var r=e+":delegate(x-tooltip+*)",o=function(e){n&&this===t.nextElementSibling&&n.call(this,e)};return new i(document.documentElement,r,o)}function u(t,e,n,r){if(e===N)return a(t,n,r);if(e===L)return s(t,n,r);var o=n+":delegate("+e+")";return new i(document.documentElement,o,function(e){var n=this;c(n,t)||r.call(n,e)})}function l(t,e,n){var i=[],r=function(){var e=this;t.xtag._skipOuterClick=!0,t.hasAttribute("visible")?e===t.xtag.lastTargetElem?_(t):w(t,e):w(t,e)},o=u(t,e,n,r);return i.push(o),i}function c(t,e){if(e.contains)return e.contains(t);for(;t;){if(t===e)return!0;t=t.parentNode}return!1}function d(t){return function(e){var n=this,i=e.relatedTarget||e.toElement;i?c(i,n)||t.call(this,e):t.call(this,e)}}function h(t,e){var n=[];n=e===N?t.previousElementSibling?[t.previousElementSibling]:[]:e===L?t.nextElementSibling?[t.nextElementSibling]:[]:xtag.query(document,e);for(var i=0;i<n.length;){var r=n[i];c(r,t)?n.splice(i,1):i++}return n}function f(t,n){var i=function(t,e,n){return n.left<=t&&t<=n.right&&n.top<=e&&e<=n.bottom},r=e(t),o=e(n),a=function(t,e){return i(t.left,t.top,e)||i(t.right,t.top,e)||i(t.right,t.bottom,e)||i(t.left,t.bottom,e)},s=function(t,e){return t.top<=e.top&&e.bottom<=t.bottom&&e.left<=t.left&&t.right<=e.right};return a(r,o)||a(o,r)||s(r,o)||s(o,r)}function g(t,e,n){var i=n*(Math.PI/180),r=t*Math.sin(i)+e*Math.cos(i),o=t*Math.cos(i)+e*Math.sin(i);return{height:r,width:o}}function p(t,e,n){var i=t;return i=void 0!==e?Math.max(e,i):i,i=void 0!==n?Math.min(n,i):i}function v(t,e){for(var n=t.parentNode,i=n.scrollWidth,r=n.scrollHeight,o=[],a=[],s=0;s<e.length;s++){var u=e[s],l=u.rect;l.left<0||l.top<0||l.right>i||l.bottom>r?a.push(u):o.push(u)}var c=o.length>0?o:a;return c.length>0?c[0].orient:null}function m(t,i,r){var o=e(t),a=e(i);r=r?r:n(i,a);var s=i.clientTop*r.y,u=i.clientLeft*r.x,l=i.scrollTop*r.y,d=i.scrollLeft*r.x,h={top:o.top-a.top-s,left:o.left-a.left-u};return i!==document.body&&c(i,document.body)&&(h.top+=l,h.left+=d),h}function b(t){t.setAttribute("_force-display",!0)}function x(t){t.removeAttribute("_force-display")}function y(e,n){var i=e.xtag.arrowEl,r=[];for(var o in S){i.setAttribute("arrow-direction",S[o]);var a=E(e,n,o);a&&(b(e),f(e,n)||r.push({orient:o,rect:a}),x(e))}var s=v(e,r);return e.setAttribute("_auto-orientation",s),i.setAttribute("arrow-direction",S[s]),t(s)&&s!==o?E(e,n,s):a}function E(i,r,o,a){if(!i.parentNode)return i.left="",i.top="",null;a=void 0===a?0:a;var s=i.xtag.arrowEl;if(!t(o))return y(i,r);var u=i.offsetParent?i.offsetParent:i.parentNode;a||(i.style.top="",i.style.left="",s.style.top="",s.style.left=""),b(i);var l=e(u),c=n(u,l),d=m(r,u,c),h=u.scrollWidth*c.x,f=u.scrollHeight*c.y,v=u.clientWidth*c.x,w=u.clientHeight*c.y,_=e(r),A=_.width,T=_.height,C=e(i),k=n(i,C),S=C.width,N=C.height,L=s.offsetWidth*k.x,O=s.offsetHeight*k.y,M=45,D=g(L,O,M);L=D.width,O=D.height;var I,R,F,j,H={left:d.left+(A-S)/2,top:d.top+(T-N)/2},U=function(t,e){return{left:(A-L)/2+d.left-e,top:(T-O)/2+d.top-t}};if("top"===o)O/=2,I=d.top-N-O,R=H.left,F=f-N-O,j=h-S;else if("bottom"===o)O/=2,I=d.top+T+O,R=H.left,F=f-N,j=h-S;else if("left"===o)L/=2,I=H.top,R=d.left-S-L,F=f-N,j=h-S-L;else{if("right"!==o)throw"invalid orientation "+o;L/=2,I=H.top,R=d.left+A+L,F=f-N,j=h-S}i.noOverflow&&(I=p(I,0,F),R=p(R,0,j));var P,q,W,V=U(I,R);"top"===o||"bottom"===o?(P=p(V.left,0,S-L),q=S,W="left"):(P=p(V.top,0,N-O),q=N,W="top");var z=q?P/q:0;s.style[W]=100*z+"%";var B=w?I/w:0,G=v?R/v:0;i.style.top=100*B+"%",i.style.left=100*G+"%";var Y=i.offsetWidth*k.x,K=i.offsetHeight*k.y,J=u.clientWidth*c.x,X=u.clientHeight*c.y;x(i);var $=1;return $>a&&(S!==Y||N!==K||v!==J||w!==X)?E(i,r,o,a+1):{left:R,top:I,width:Y,height:K,right:R+Y,bottom:I+K}}function w(t,e){e===t&&console.log("The tooltip's target element is the tooltip itself! Is this intentional?");var n=t.xtag.arrowEl,i=t.orientation,r=function(){x(t),t.setAttribute("visible",!0),xtag.fireEvent(t,"tooltipshown",{triggerElem:e})};e?(E(t,e,i),t.xtag.lastTargetElem=e,r()):(t.style.top="",t.style.left="",n.style.top="",n.style.left="",r())}function _(e){t(e.orientation)&&e.removeAttribute("_auto-orientation"),e.hasAttribute("visible")&&(b(e),e.xtag._hideTransitionFlag=!0,e.removeAttribute("visible"))}function A(t){var e=t.xtag.cachedListeners;e.forEach(function(t){t.removeListener()}),t.xtag.cachedListeners=[],C.unregisterTooltip(t.triggerStyle,t)}function T(t,e,n){if(t.parentNode){(void 0===e||null===e)&&(e=t.targetSelector),(void 0===n||null===n)&&(n=t.triggerStyle);var i=h(t,e);-1===i.indexOf(t.xtag.lastTargetElem)&&(t.xtag.lastTargetElem=i.length>0?i[0]:null,E(t,t.xtag.lastTargetElem,t.orientation)),A(t);var r;if(n in k){var o=k[n];r=o(t,e)}else r=l(t,e,n),C.registerTooltip(n,t);r.forEach(function(t){t.attachListener()}),t.xtag.cachedListeners=r,_(t)}}var C,k,S={top:"down",bottom:"up",left:"right",right:"left"},N="_previousSibling",L="_nextSibling";i.prototype.attachListener=function(){this._attachedFn||(this._attachedFn=xtag.addEvent(this.elem,this.eventType,this.listenerFn))},i.prototype.removeListener=function(){this._attachedFn&&(xtag.removeEvent(this.elem,this.eventType,this._attachedFn),this._attachedFn=null)},r.prototype.destroy=function(){this._cachedListener.removeListener(),this._cachedListener=null,this._tooltips=null},r.prototype.containsTooltip=function(t){return-1!==this._tooltips.indexOf(t)},r.prototype.addTooltip=function(t){this.containsTooltip(t)||this._tooltips.push(t)},r.prototype.removeTooltip=function(t){this.containsTooltip(t)&&this._tooltips.splice(this._tooltips.indexOf(t),1)},Object.defineProperties(r.prototype,{numTooltips:{get:function(){return this._tooltips.length}}}),o.prototype.registerTooltip=function(t,e){if(t in this.eventStructDict){var n=this.eventStructDict[t];n.containsTooltip(e)||n.addTooltip(e)}else this.eventStructDict[t]=new r(t),this.eventStructDict[t].addTooltip(e)},o.prototype.unregisterTooltip=function(t,e){if(t in this.eventStructDict&&this.eventStructDict[t].containsTooltip(e)){var n=this.eventStructDict[t];n.removeTooltip(e),0===n.numTooltips&&(n.destroy(),delete this.eventStructDict[t])}},C=new o,k={custom:function(){return[]},hover:function(t,e){var n=[],r=null,o=200,a=function(){r&&window.clearTimeout(r),r=null},s=d(function(e){a();var n=this,i=e.relatedTarget||e.toElement;c(i,t)||w(t,n)}),l=d(function(e){a();var n=e.relatedTarget||e.toElement;c(n,t)||(r=window.setTimeout(function(){"hover"===t.triggerStyle&&_(t)},o))}),h=u(t,e,"tapenter",s),f=u(t,e,"tapleave",l);n.push(h),n.push(f);var g=d(function(e){a();var n=e.relatedTarget||e.toElement,i=t.xtag.lastTargetElem;t.hasAttribute("visible")||!i||c(n,i)||w(t,i)}),p=d(function(e){a();var n=e.relatedTarget||e.toElement,i=t.xtag.lastTargetElem;i&&!c(n,i)&&(r=window.setTimeout(function(){"hover"===t.triggerStyle&&_(t)},o))});return n.push(new i(t,"tapenter",g)),n.push(new i(t,"tapleave",p)),n}},xtag.register("x-tooltip",{lifecycle:{created:function(){this.xtag.contentEl=document.createElement("div"),this.xtag.arrowEl=document.createElement("span"),xtag.addClass(this.xtag.contentEl,"tooltip-content"),xtag.addClass(this.xtag.arrowEl,"tooltip-arrow"),this.xtag.contentEl.innerHTML=this.innerHTML,this.innerHTML="",this.appendChild(this.xtag.contentEl),this.appendChild(this.xtag.arrowEl),this.xtag._orientation="auto",this.xtag._targetSelector=N,this.xtag._triggerStyle="hover";var t=h(this,this.xtag._targetSelector);this.xtag.lastTargetElem=t.length>0?t[0]:null,this.xtag.cachedListeners=[],this.xtag._hideTransitionFlag=!1,this.xtag._skipOuterClick=!1},inserted:function(){T(this,this.xtag._targetSelector,this.xtag._triggerStyle)},removed:function(){A(this)}},events:{transitionend:function(t){var e=t.currentTarget;e.xtag._hideTransitionFlag&&!e.hasAttribute("visible")&&(e.xtag._hideTransitionFlag=!1,xtag.fireEvent(e,"tooltiphidden")),x(e)}},accessors:{orientation:{attribute:{},get:function(){return this.xtag._orientation},set:function(e){e=e.toLowerCase();var n=this.querySelector(".tooltip-arrow"),i=null;t(e)?(i=S[e],n.setAttribute("arrow-direction",i),this.removeAttribute("_auto-orientation")):n.removeAttribute("arrow-direction"),this.xtag._orientation=e,this.refreshPosition()}},triggerStyle:{attribute:{name:"trigger-style"},get:function(){return this.xtag._triggerStyle},set:function(t){T(this,this.targetSelector,t),this.xtag._triggerStyle=t}},targetSelector:{attribute:{name:"target-selector"},get:function(){return this.xtag._targetSelector},set:function(t){h(this,t),T(this,t,this.triggerStyle),this.xtag._targetSelector=t}},ignoreOuterTrigger:{attribute:{"boolean":!0,name:"ignore-outer-trigger"}},ignoreTooltipPointerEvents:{attribute:{"boolean":!0,name:"ignore-tooltip-pointer-events"}},noOverflow:{attribute:{"boolean":!0,name:"no-overflow"},set:function(){this.refreshPosition()}},contentEl:{get:function(){return this.xtag.contentEl},set:function(t){var e=this.xtag.contentEl;xtag.addClass(t,"tooltip-content"),this.replaceChild(t,e),this.xtag.contentEl=t,this.refreshPosition()}},presetTriggerStyles:{get:function(){var t=[];for(var e in k)t.push(e);return t}},targetElems:{get:function(){return h(this,this.targetSelector)}}},methods:{refreshPosition:function(){this.xtag.lastTargetElem&&E(this,this.xtag.lastTargetElem,this.orientation)},show:function(){w(this,this.xtag.lastTargetElem)},hide:function(){_(this)},toggle:function(){this.hasAttribute("visible")?this.hide():this.show()}}})}();